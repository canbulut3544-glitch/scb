<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Course Notes</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome (İkonlar için) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(to bottom right, #e0e7ff, #c7d2fe);
        }
        /* Aktif menü öğesi */
        .sidebar-link.active {
            background-color: #eef2ff;
            color: #4f46e5;
            font-weight: 600;
        }
        /* Özel kaydırma çubuğu (isteğe bağlı) */
        ::-webkit-scrollbar {
            width: 6px;
        }
        ::-webkit-scrollbar-thumb {
            background: #a5b4fc;
            border-radius: 10px;
        }
    </style>
</head>
<body class="bg-gray-100">

    <!-- Firebase SDK (Gerekli kütüphaneler) -->
    <script type="module">
        // Firebase kütüphanelerini import et
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { 
            getAuth, 
            onAuthStateChanged, 
            GoogleAuthProvider, 
            signInWithRedirect, 
            getRedirectResult,  
            signOut,
            setPersistence,                 // YENİ (v15)
            browserSessionPersistence     // YENİ (v15)
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { 
            getFirestore, 
            collection, 
            addDoc, 
            query, 
            where, 
            getDoc,
            deleteDoc, 
            doc,
            onSnapshot,
            orderBy
        } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // DOM yüklendiğinde tüm kodun çalışmasını sağla
        document.addEventListener('DOMContentLoaded', () => {

            // --- FIREBASE KURULUMU ---

            const firebaseConfig = {
                apiKey: "AIzaSyB0RRW0s_M684tLdqZSARDvxTcCz4Hr91I",
                authDomain: "notes-5633a.firebaseapp.com",
                projectId: "notes-5633a",
                storageBucket: "notes-5633a.firebasestorage.app",
                messagingSenderId: "1021353689975",
                appId: "1:1021353689975:web:9659474f44b071249bd772",
                measurementId: "G-ZLBEND7L8Q"
            };

            // Firebase'i başlat
            const app = initializeApp(firebaseConfig);
            const auth = getAuth(app);
            const db = getFirestore(app);
            const notesCollection = collection(db, "notes");
            const provider = new GoogleAuthProvider();

            // 'auth' objesini konsoldan (global scope) erişilebilir yap
            window.auth = auth; 

            let currentCourseId = 'home'; // Aktif ders
            let currentUser = null; // Giriş yapan kullanıcı (admin) bilgisi
            let activeNoteListeners = () => {}; // Aktif onSnapshot dinleyicisini kapatmak için

            // --- DOM Elementleri ---
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const courseContents = document.querySelectorAll('.course-content');
            const noteViewPanel = document.getElementById('note-view-panel');
            const noteFrame = document.getElementById('note-frame');
            const addNoteModal = document.getElementById('add-note-modal');
            const deleteConfirmModal = document.getElementById('delete-confirm-modal');
            const signInButton = document.getElementById('signInButton');
            const signOutButton = document.getElementById('signOutButton');
            const addNoteButtons = document.querySelectorAll('.add-note-button'); 
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
            const sidebar = document.getElementById('sidebar');

            
            // *** YENİ BLOK (v15 Düzeltmesi) ***
            // Girişin yönlendirmeden sonra "unutulmamasını" sağlamak için
            setPersistence(auth, browserSessionPersistence)
                .then(() => {
                    // Persistence ayarlandı, auth işlemlerine şimdi başla

                    // --- YÖNLENDİRME GİRİŞ KONTROLÜ ---
                    getRedirectResult(auth)
                        .then((result) => {
                            if (result) {
                                // Yönlendirmeden başarıyla dönüldü
                                console.log("Redirect sign-in successful:", result.user);
                            }
                            // Eğer result null ise, bu normal bir sayfa yüklemesidir
                        }).catch((error) => {
                            console.error("Redirect sign-in error:", error);
                        });

                    // --- AUTH (Giriş/Çıkış) YÖNETİMİ ---
                    onAuthStateChanged(auth, (user) => {
                        if (user) {
                            // Kullanıcı (Admin) giriş yaptı
                            currentUser = user;
                            signInButton.classList.add('hidden');
                            signOutButton.classList.remove('hidden');
                            signOutButton.querySelector('span').textContent = user.displayName ? user.displayName.split(' ')[0] : 'Sign Out';
                            toggleAdminControls(true);
                        } else {
                            // Kullanıcı (Admin) çıkış yaptı
                            currentUser = null;
                            signInButton.classList.remove('hidden');
                            signOutButton.classList.add('hidden');
                            toggleAdminControls(false);
                        }
                        // Notları sadece ders sayfasındaysak yükle
                        if(currentCourseId !== 'home') {
                            loadAllNotes(currentCourseId);
                        }
                    });

                    // --- TÜM DİĞER FONKSİYONLAR VE EVENT LISTENERLAR ---
                    // setPersistence.then() bloğunun içinde olmaları gerekiyor

                    // Google ile Giriş
                    signInButton.addEventListener('click', () => {
                        signInWithRedirect(auth, provider); 
                    });

                    // Çıkış
                    signOutButton.addEventListener('click', () => {
                        signOut(auth).catch((error) => {
                            console.error("Çıkış hatası:", error);
                        });
                    });
                    
                    // Admin butonlarını (Not Ekle / Sil) göster/gizle
                    function toggleAdminControls(show) {
                        addNoteButtons.forEach(button => {
                            if (show) {
                                button.classList.remove('hidden');
                            } else {
                                button.classList.add('hidden');
                            }
                        });
                        if(currentCourseId !== 'home') {
                            loadAllNotes(currentCourseId);
                        }
                    }

                    // --- SAYFA VE MENÜ YÖNETİMİ ---
                    
                    // Mobil menü
                    mobileMenuButton.addEventListener('click', () => {
                        sidebar.classList.remove('-translate-x-full');
                        mobileMenuOverlay.classList.remove('hidden');
                    });

                    const closeMenu = () => {
                        sidebar.classList.add('-translate-x-full');
                        mobileMenuOverlay.classList.add('hidden');
                    };

                    mobileMenuOverlay.addEventListener('click', closeMenu);

                    // Sidebar linklerine tıklama
                    sidebarLinks.forEach(link => {
                        link.addEventListener('click', (e) => {
                            e.preventDefault();
                            const courseId = link.getAttribute('data-course');
                            setActivePage(courseId);
                            if (window.innerWidth < 768) { 
                                closeMenu();
                            }
                        });
                    });

                    // Aktif ders sayfasını ayarla
                    function setActivePage(courseId) {
                        currentCourseId = courseId;
                        courseContents.forEach(content => content.classList.add('hidden'));
                        const targetContent = document.getElementById(`course-${courseId}`);
                        if (targetContent) {
                            targetContent.classList.remove('hidden');
                        }
                        sidebarLinks.forEach(l => l.classList.remove('active'));
                        const activeLink = document.querySelector(`.sidebar-link[data-course="${courseId}"]`);
                        if (activeLink) {
                            activeLink.classList.add('active');
                        }
                        showNoteList(); // Geri tuşuna basılmış olabilir, listeyi göster
                        
                        if(courseId !== 'home') {
                            loadAllNotes(courseId);
                        } else {
                            if (activeNoteListeners) activeNoteListeners(); // Home'daysa dinleyiciyi kapat
                        }
                    }

                    // --- NOT YÖNETİMİ (FIREBASE) ---

                    function loadAllNotes(courseId) {
                        if (activeNoteListeners) activeNoteListeners();
                        if (courseId === 'home') {
                            renderNotes([], courseId); 
                            return;
                        }
                        const noteListContainer = document.getElementById(`notes-list-${courseId}`);
                        if (!noteListContainer) return;
                        noteListContainer.innerHTML = '<p class="text-gray-500">Loading notes...</p>';

                        const q = query(
                            notesCollection, 
                            where("course", "==", courseId),
                            orderBy("createdAt", "desc") 
                        );

                        activeNoteListeners = onSnapshot(q, (querySnapshot) => {
                            const notes = [];
                            querySnapshot.forEach((doc) => {
                                notes.push({ id: doc.id, ...doc.data() });
                            });
                            renderNotes(notes, courseId);
                        }, (error) => {
                            console.error("Notları yüklerken hata:", error);
                            noteListContainer.innerHTML = `<p class="text-red-500">Error loading notes. (Hata: ${error.code})</p>`;
                        });
                    }

                    function renderNotes(notes, courseId) {
                        if (courseId === 'home') return;
                        const noteListContainer = document.getElementById(`notes-list-${courseId}`);
                        if (!noteListContainer) return;

                        if (notes.length === 0) {
                            noteListContainer.innerHTML = '<p class="text-gray-500">No notes added for this course yet.</p>';
                            return;
                        }
                        noteListContainer.innerHTML = ''; 
                        
                        notes.forEach(note => {
                            const noteElement = document.createElement('div');
                            noteElement.className = 'bg-white p-4 rounded-lg shadow-md flex justify-between items-center';
                            
                            // Sadece admin (currentUser) varsa silme butonunu göster
                            const deleteButtonHtml = currentUser ? `
                            <button data-note-id="${note.id}" class="delete-note-btn text-red-500 hover:text-red-700">
                                <i class="fas fa-trash"></i>
                            </button>
                            ` : '';

                            noteElement.innerHTML = `
                                <div>
                                    <h3 class="text-lg font-semibold text-blue-700">${note.title}</h3>
                                </div>
                                <div class="flex space-x-3 items-center">
                                    <button data-note-id="${note.id}" class="view-note-btn text-blue-600 font-medium hover:underline">View Note</button>
                                    ${deleteButtonHtml}
                                </div>
                            `;
                            noteListContainer.appendChild(noteElement);
                        });
                    }

                    async function addNoteToFirestore(title, htmlContent, course) {
                        if (!currentUser) {
                            console.error("Admin girişi yapılmamış. Not eklenemez.");
                            return;
                        }
                        try {
                            await addDoc(notesCollection, {
                                title: title,
                                htmlContent: htmlContent,
                                course: course,
                                userId: currentUser.uid, 
                                createdAt: Date.now() 
                            });
                            console.log("Not başarıyla eklendi!");
                        } catch (error) {
                            console.error("Error adding document: ", error);
                        }
                    }
                    
                    async function deleteNoteFromFirestore(noteId) {
                        if (!currentUser) {
                             console.error("Admin girişi yapılmamış. Not silinemez.");
                            return;
                        }
                        try {
                            const noteRef = doc(db, "notes", noteId);
                            await deleteDoc(noteRef);
                            console.log("Not başarıyla silindi!");
                        } catch (error) {
                            console.error("Error deleting document: ", error);
                        }
                    }

                    // --- MODAL (AÇILIR PENCERE) YÖNETİMİ ---

                    addNoteButtons.forEach(button => {
                        button.addEventListener('click', () => {
                            addNoteModal.classList.remove('hidden');
                        });
                    });

                    document.getElementById('close-add-note-modal').addEventListener('click', () => {
                        addNoteModal.classList.add('hidden');
                    });
                    document.getElementById('cancel-add-note').addEventListener('click', () => {
                        addNoteModal.classList.add('hidden');
                    });

                    document.getElementById('add-note-form').addEventListener('submit', (e) => {
                        e.preventDefault();
                        const noteTitle = document.getElementById('note-title').value;
                        const noteFile = document.getElementById('note-file').files[0];
                        
                        if (noteTitle && noteFile && currentCourseId !== 'home' && currentUser) {
                            const reader = new FileReader();
                            reader.onload = (event) => {
                                const htmlContent = event.target.result;
                                addNoteToFirestore(noteTitle, htmlContent, currentCourseId);
                                document.getElementById('add-note-form').reset();
                                addNoteModal.classList.add('hidden');
                            };
                            reader.readAsText(noteFile);
                        } else if (!currentUser) {
                            alert("You must be signed in to upload a note.");
                        } else {
                            alert("Please fill in all fields and select a course.");
                        }
                    });

                    let noteIdToDelete = null; 
                    document.getElementById('cancel-delete').addEventListener('click', () => {
                        deleteConfirmModal.classList.add('hidden');
                        noteIdToDelete = null;
                    });
                    document.getElementById('confirm-delete').addEventListener('click', () => {
                        if (noteIdToDelete && currentUser) {
                            deleteNoteFromFirestore(noteIdToDelete);
                        }
                        deleteConfirmModal.classList.add('hidden');
                        noteIdToDelete = null;
                    });

                    // --- NOT GÖRÜNTÜLEME VE LİSTELEME ---
                    
                    document.addEventListener('click', (e) => {
                        const viewButton = e.target.closest('.view-note-btn');
                        const deleteButton = e.target.closest('.delete-note-btn');

                        if (viewButton) {
                            const noteId = viewButton.getAttribute('data-note-id');
                            viewNote(noteId);
                        }
                        
                        if (deleteButton && currentUser) { 
                            noteIdToDelete = deleteButton.getAttribute('data-note-id');
                            deleteConfirmModal.classList.remove('hidden');
                        }
                    });

                    async function viewNote(noteId) {
                        try {
                            const noteRef = doc(db, "notes", noteId);
                            const docSnap = await getDoc(noteRef); 

                            if (docSnap.exists()) {
                                const note = docSnap.data();
                                const currentCourseContent = document.getElementById(`course-${note.course}`);
                                if(currentCourseContent) {
                                    currentCourseContent.classList.add('hidden');
                                }
                                const blob = new Blob([note.htmlContent], { type: 'text/html' });
                                const url = URL.createObjectURL(blob);
                                noteFrame.src = url; 
                                noteViewPanel.classList.remove('hidden');
                            } else {
                                console.error("No such document!");
                            }
                        } catch (error) {
                            console.error("Error getting document:", error);
                        }
                    }

                    document.getElementById('back-to-list').addEventListener('click', () => {
                        showNoteList();
                    });

                    function showNoteList() {
                        noteViewPanel.classList.add('hidden');
                        noteFrame.src = 'about:blank'; 
                        const targetContent = document.getElementById(`course-${currentCourseId}`);
                        if (targetContent) {
                            targetContent.classList.remove('hidden');
                        }
                    }
                    
                    // Başlangıçta 'home' sayfasını ayarla
                    setActivePage('home');
                
                }) // setPersistence.then() sonu
                .catch((error) => {
                    // Persistence hatası (örn. tarayıcı ayarları engelliyor)
                    console.error("Auth persistence error:", error);
                });
            
        }); // DOMContentLoaded sonu
    </script>
    
    <!-- Mobil Menü İçin Arka Plan Karartma -->
    <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-10 hidden md:hidden"></div>
    
    <!-- Ana Yapı -->
    <div class="flex h-screen">
        
        <!-- Sidebar (Sol Menü) -->
        <aside id="sidebar" class="w-64 bg-white shadow-lg flex-shrink-0 fixed inset-y-0 left-0 z-20 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out">
            <div class="p-5 border-b border-gray-200 flex justify-between items-center">
                <h1 class="text-2xl font-bold text-gray-800">My Course Notes</h1>
                <!-- Google ile Giriş Butonları -->
                <div class="relative">
                    <button id="signInButton" class="bg-blue-600 text-white px-3 py-1 rounded-lg text-sm font-medium hover:bg-blue-700">
                        Sign In
                    </button>
                    <button id="signOutButton" class="hidden bg-gray-700 text-white px-3 py-1 rounded-lg text-sm font-medium hover:bg-gray-800 flex items-center space-x-2">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>Sign Out</span>
                    </button>
                </div>
            </div>
            <nav class="p-4">
                <ul class="space-y-2">
                    <!-- Ders Linkleri -->
                    <li><a href="#" class="sidebar-link block w-full px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100" data-course="home">Home</a></li>
                    <li><a href="#" class="sidebar-link block w-full px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100" data-course="math">Math</a></li>
                    <li><a href="#" class="sidebar-link block w-full px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100" data-course="social-science">Social Science</a></li>
                    <li><a href="#" class="sidebar-link block w-full px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100" data-course="political-science">Political Science</a></li>
                    <li><a href="#" class="sidebar-link block w-full px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100" data-course="microeconomy">Microeconomy</a></li>
                    <li><a href="#" class="sidebar-link block w-full px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100" data-course="law">Law</a></li>
                    <li><a href="#" class="sidebar-link block w-full px-4 py-2 rounded-lg text-gray-700 hover:bg-gray-100" data-course="management">Management</a></li>
                </ul>
            </nav>
        </aside>

        <!-- Ana İçerik Alanı -->
        <main class="flex-1 p-6 md:p-8 overflow-y-auto md:ml-64">
            
            <!-- Mobil Üst Çubuk -->
            <div class="md:hidden flex justify-between items-center mb-4">
                <button id="mobile-menu-button" class="text-gray-800 text-2xl">
                    <i class="fas fa-bars"></i>
                </button>
                <h1 class="text-xl font-bold text-gray-800">My Course Notes</h1>
            </div>

            <!-- 1. Home İçeriği -->
            <div id="course-home" class="course-content">
                <h2 class="text-3xl font-bold text-gray-900 mb-6">Welcome!</h2>
                <p class="text-lg text-gray-700 leading-relaxed">
                    This site is a public archive for organizing and sharing course notes.
                    <br><br>
                    Please select a course from the menu on the left to view the notes.
                </p>
                <p class="text-md text-gray-600 mt-6 bg-yellow-100 p-4 rounded-lg">
                    <i class="fas fa-info-circle mr-2"></i>To add or delete notes, you must sign in as an admin.
                </p>
            </div>

            <!-- 2. Math İçeriği -->
            <div id="course-math" class="course-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-900">Math Notes</h2>
                    <button class="add-note-button hidden bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700">
                        <i class="fas fa-plus mr-2"></i>Add New Note
                    </button>
                </div>
                <div id="notes-list-math" class="space-y-4">
                    <!-- Notlar buraya yüklenecek -->
                </div>
            </div>

            <!-- 3. Social Science İçeriği -->
            <div id="course-social-science" class="course-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-900">Social Science Notes</h2>
                    <button class="add-note-button hidden bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700">
                        <i class="fas fa-plus mr-2"></i>Add New Note
                    </button>
                </div>
                <div id="notes-list-social-science" class="space-y-4">
                    <!-- Notlar buraya yüklenecek -->
                </div>
            </div>
            
            <!-- 4. Political Science İçeriği -->
            <div id="course-political-science" class="course-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-900">Political Science Notes</h2>
                    <button class="add-note-button hidden bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700">
                        <i class="fas fa-plus mr-2"></i>Add New Note
                    </button>
                </div>
                <div id="notes-list-political-science" class="space-y-4">
                    <!-- Notlar buraya yüklenecek -->
                </div>
            </div>

            <!-- 5. Microeconomy İçeriği -->
            <div id="course-microeconomy" class="course-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-900">Microeconomy Notes</h2>
                    <button class="add-note-button hidden bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700">
                        <i class="fas fa-plus mr-2"></i>Add New Note
                    </button>
                </div>
                <div id="notes-list-microeconomy" class="space-y-4">
                    <!-- Notlar buraya yüklenecek -->
                </div>
            </div>

            <!-- 6. Law İçeriği -->
            <div id="course-law" class="course-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-900">Law Notes</h2>
                    <button class="add-note-button hidden bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700">
                        <i class="fas fa-plus mr-2"></i>Add New Note
                    </button>
                </div>
                <div id="notes-list-law" class="space-y-4">
                    <!-- Notlar buraya yüklenecek -->
                </div>
            </div>

            <!-- 7. Management İçeriği -->
            <div id="course-management" class="course-content hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-gray-900">Management Notes</h2>
                    <button class="add-note-button hidden bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700">
                        <i class="fas fa-plus mr-2"></i>Add New Note
                    </button>
                </div>
                <div id="notes-list-management" class="space-y-4">
                    <!-- Notlar buraya yüklenecek -->
                </div>
            </div>

            <!-- Not Görüntüleme Paneli (Gizli) -->
            <div id="note-view-panel" class="hidden">
                <button id="back-to-list" class="mb-4 bg-gray-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-gray-700">
                    &larr; Back to Note List
                </button>
                <div class="w-full h-[80vh] bg-white rounded-lg shadow-lg">
                    <iframe id="note-frame" class="w-full h-full border-0 rounded-lg"></iframe>
                </div>
            </div>

        </main>
    </div>

    <!-- Modal: Add New Note (Gizli) -->
    <div id="add-note-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-30 hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-lg">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-2xl font-bold">Add a New Note</h3>
                <button id="close-add-note-modal" class="text-gray-500 hover:text-gray-800 text-2xl">&times;</button>
            </div>
            <form id="add-note-form">
                <div class="mb-4">
                    <label for="note-title" class="block text-sm font-medium text-gray-700 mb-1">Note Title</label>
                    <input type="text" id="note-title" class="w-full border-gray-300 rounded-lg shadow-sm" required>
                </div>
                <div class="mb-4">
                    <label for="note-file" class="block text-sm font-medium text-gray-700 mb-1">Upload HTML File</label>
                    <input type="file" id="note-file" accept=".html,.htm" class="w-full text-sm text-gray-500
                        file:mr-4 file:py-2 file:px-4
                        file:rounded-lg file:border-0
                        file:text-sm file:font-semibold
                        file:bg-blue-50 file:text-blue-700
                        hover:file:bg-blue-100" required>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" id="cancel-add-note" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300">Cancel</button>
                    <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">Upload Note</button>
                </div>
            </form>
        </div>
    </div>
    
    <!-- Modal: Delete Confirmation (Gizli) -->
    <div id="delete-confirm-modal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-30 hidden">
        <div class="bg-white rounded-lg shadow-xl p-6 w-full max-w-md">
            <h3 class="text-xl font-bold mb-4">Emin misin?</h3>
            <p class="text-gray-700 mb-6">Bu notu silmek istediğinizden emin misiniz? Bu işlem geri alınamaz.</p>
            <div class="flex justify-end space-x-3">
                <button id="cancel-delete" class="bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300">Cancel</button>
                <button id="confirm-delete" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700">Delete</button>
            </div>
        </div>
    </div>
    
</body>
</html>
